<?xml version="1.0"?>
<!DOCTYPE COMMANDO SYSTEM "commando.dtd"><!-- ruby processing commando -->
<!-- Monkstone, 2013-Jun-07 -->
<COMMANDO>
  <UI>
    <CAPTION LABEL="Run">
      <FILE_ENTRY LABEL="ruby file" VARNAME="file" EVAL="buffer.getName()"/>
    </CAPTION>
    <CAPTION LABEL="Path to rp5">
      <ENTRY LABEL="(no spaces)" VARNAME="rp5" DEFAULT="/var/lib/gems/1.9.1/bin/"/>
    </CAPTION>
    <CAPTION LABEL="Choose Run/Watch/Create/App/Applet">
      <CHOICE LABEL="Select" VARNAME="type" DEFAULT="run">
        <OPTION LABEL="run" VALUE="run"/>
        <OPTION LABEL="watch" VALUE="watch"/>
        <OPTION LABEL="create" VALUE="create"/>
        <OPTION LABEL="export app" VALUE="app"/>
        <OPTION LABEL="export applet" VALUE="applet"/>
      </CHOICE>
    </CAPTION>
    <CAPTION LABEL="JRuby Opt">
      <TOGGLE LABEL="local jruby" VARNAME="jruby" DEFAULT="FALSE"/>
    </CAPTION>
  </UI>

  <COMMANDS>

    <COMMAND SHELL="System" CONFIRM="FALSE">
<!-- cd to working dir -->

	  buf = new StringBuilder("cd ");
	  buf.append(MiscUtilities.getParentOfPath(buffer.getPath()));
	  buf.toString();
	
</COMMAND>

    <COMMAND SHELL="System" CONFIRM="FALSE">

	  buf = new StringBuilder(rp5 + "rp5 ");
	  buf.append(type);
	  buf.append(" ");
	  if (jruby){
	  buf.append("--jruby ");
	  }
	  switch(type){
	  case "run":
	  case "watch":
	      buf.append(file);
	      break;
	  }
	  buf.toString();
	
</COMMAND>


  </COMMANDS>
</COMMANDO>
